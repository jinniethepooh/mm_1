<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Story Timeline E-Card</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Inter font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        /* Base styles for the entire page and font */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* Dark Theme: Very dark gray/black background */
            scroll-behavior: smooth; /* Keep for general smooth scrolling */
        }

        /* --- Timeline Styling (Custom CSS for the line effect) --- */
        .timeline-container {
            position: relative;
            padding-left: 2rem; /* Space for the timeline line */
        }

        /* The vertical line running down the center-left */
        .timeline-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 1rem;
            width: 3px;
            height: 100%;
            background-color: #60a5fa; /* Lighter blue line for contrast */
            border-radius: 9999px;
        }

        /* Circle/dot marker for each timeline item */
        .timeline-item-marker {
            position: absolute;
            left: 0.5rem;
            width: 1rem;
            height: 1rem;
            background-color: #3b82f6; /* Blue dot */
            border: 3px solid #111827; /* Dark border to match body background */
            border-radius: 50%;
            z-index: 10;
            transform: translateX(-50%);
        }

        /* --- Flip Card Styling --- */
        .flip-card {
            background-color: transparent;
            width: 100%;
            height: 300px; /* Fixed height for visual consistency */
            perspective: 1000px; /* 3D perspective effect */
            margin-bottom: 2rem;
            cursor: pointer;
        }

        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2); /* Darker shadow for dark theme */
            border-radius: 0.75rem; /* Rounded corners */
        }

        /* When the card is flipped, rotate the inner container */
        .flip-card.is-flipped .flip-card-inner {
            transform: rotateY(180deg);
        }

        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden; /* Hide the reverse side */
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 0.75rem;
            padding: 1rem;
            color: white;
            overflow: hidden;
        }

        .flip-card-front {
            background-color: #3b82f6; /* Blue front */
        }

        .flip-card-back {
            background-color: #1d4ed8; /* Darker blue back */
            transform: rotateY(180deg);
        }

        /* Ensure images fill the card front */
        .flip-card-front img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 0.75rem;
        }

        /* Forcing scroll to the ending */
        .ending-section {
            min-height: 80vh; /* Ensures content extends past screen height */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        /* --- Front Page Styling (Updated for 3D Flip Transition) --- */
        #frontPage {
            position: fixed; /* Fixed overlay */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%; /* Full screen overlay */
            background-color: #111827; /* Match dark theme body */
            z-index: 50; /* Ensure it covers everything */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            cursor: pointer;
            
            /* Properties for the 3D transition */
            transition: transform 1.0s ease-in-out, opacity 0.5s ease-out; 
            transform-style: preserve-3d;
            perspective: 1000px;
            transform-origin: top; /* Pivot the rotation from the top edge */
        }

        /* Class to trigger the flip effect when clicked */
        #frontPage.flip-out {
            /* Rotate along the X-axis (like opening a book/trap door) */
            transform: rotateX(-90deg); 
            opacity: 0;
        }

    </style>
</head>
<body class="p-4 md:p-8 text-gray-200">

    <!-- NEW: Front Page Splash Screen -->
    <div id="frontPage" class="front-page p-8 bg-gradient-to-br from-indigo-700 to-blue-800 text-white shadow-2xl">
        <div class="space-y-6 max-w-sm mx-auto">
            <svg class="w-20 h-20 mx-auto text-yellow-300" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.022 8.72c-.783-.57-.381-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
            </svg>
            <h1 class="text-5xl font-extrabold tracking-tight">Open Our Story</h1>
            <p class="text-xl font-light opacity-90">A journey of memories made just for you.</p>
            <button id="openCardButton" class="px-8 py-3 mt-8 bg-gray-200 text-indigo-800 font-bold rounded-full shadow-xl transition transform hover:scale-105">
                Click/Tap to Start
            </button>
        </div>
    </div>

    <!-- Header Section -->
    <header class="text-center py-8 bg-gray-800 shadow-2xl rounded-xl mb-8">
        <h1 class="text-4xl font-extrabold text-white">Our E-Card Story</h1>
        <p class="text-lg text-gray-400 mt-2">Tap the cards to flip them and reveal the memories!</p>
    </header>

    <!-- Main Content Container -->
    <div class="max-w-xl mx-auto">

        <!-- --- 1. Timeline Section (10 Flip Cards) --- -->
        <h2 class="text-2xl font-bold text-gray-200 mb-6 border-b border-gray-700 pb-2">Timeline of Memories (10 Moments)</h2>
        <div id="timeline" class="timeline-container">
            
            <!-- Generate 10 Flip Cards -->
            <script>
                const timelineData = [
                    { title: "The Beginning", text: "It all started with a simple 'hello' that changed everything.", img: "https://placehold.co/500x300/FACC15/000000?text=Hello+World" },
                    { title: "First Adventure", text: "That unexpected road trip where we got completely lost.", img: "https://placehold.co/500x300/4F46E5/ffffff?text=Road+Trip" },
                    { title: "Big Move", text: "Taking the leap and moving to a new city together.", img: "https://placehold.co/500x300/10B981/ffffff?text=New+Home" },
                    { title: "The Celebration", text: "The day we finally celebrated that huge milestone!", img: "https://placehold.co/500x300/EF4444/ffffff?text=Party+Time" },
                    { title: "Crazy Night Out", text: "Remember that night? We barely made it home, but it was worth it.", img: "https://placehold.co/500x300/EC4899/ffffff?text=Late+Night" },
                    { title: "Quiet Moments", text: "The afternoons spent reading side-by-side, perfectly content.", img: "https://placehold.co/500x300/22C55E/ffffff?text=Peaceful" },
                    { title: "The Mishap", text: "That minor disaster we laughed about for weeks after.", img: "https://placehold.co/500x300/F97316/ffffff?text=Accident" },
                    { title: "Big Project", text: "Finishing that exhausting project proved we could do anything.", img: "https://placehold.co/500x300/06B6D4/ffffff?text=Project+Complete" },
                    { title: "Discovery", text: "Finding that hidden gem of a restaurant/place. Our new favorite!", img: "https://placehold.co/500x300/8B5CF6/ffffff?text=Hidden+Gem" },
                    { title: "Just Last Week", text: "The small, recent moment that reminded me why I love this.", img: "https://placehold.co/500x300/FCD34D/000000?text=Recent+Joy" }
                ];

                const timelineEl = document.getElementById('timeline');

                timelineData.forEach((item, index) => {
                    const html = `
                        <div class="relative mb-8 pt-2">
                            <div class="timeline-item-marker top-0"></div>
                            <div class="ml-4 p-2 bg-gray-700 rounded-xl shadow-xl transform transition duration-300 hover:scale-[1.02]">
                                <span class="text-sm font-semibold text-blue-400 block mb-2">Moment #${index + 1}</span>
                                <div id="card-${index}" class="flip-card">
                                    <div class="flip-card-inner">
                                        <!-- Card Front (Image) -->
                                        <div class="flip-card-front">
                                            <img src="${item.img}" alt="${item.title}" class="w-full h-full object-cover rounded-lg">
                                            <div class="absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center rounded-lg">
                                                <p class="text-xl font-bold text-white">${item.title}</p>
                                            </div>
                                        </div>
                                        <!-- Card Back (Text) -->
                                        <div class="flip-card-back p-4 bg-gradient-to-br from-blue-700 to-indigo-900">
                                            <h3 class="text-2xl font-bold mb-3">${item.title}</h3>
                                            <p class="text-base leading-relaxed">${item.text}</p>
                                            <p class="mt-4 text-xs opacity-75">Tap again to see the picture!</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    timelineEl.insertAdjacentHTML('beforeend', html);
                });
            </script>
        </div>

        <!-- --- 2. Gallery Section (5 Cards) --- -->
        <h2 class="text-2xl font-bold text-gray-200 mb-6 pt-4 border-b border-gray-700 pb-2">Photo Gallery (5 Snapshots)</h2>
        <div class="grid grid-cols-2 gap-4">
            <!-- Generate 5 Gallery Cards -->
            <script>
                const galleryData = [
                    { alt: "Sunset View", img: "https://placehold.co/500x400/93C5FD/000000?text=Sunset+View" },
                    { alt: "Foodie Shot", img: "https://placehold.co/500x400/D1D5DB/000000?text=Foodie+Shot" },
                    { alt: "Silly Selfie", img: "https://placehold.co/500x400/FBCFE8/000000?text=Silly+Selfie" },
                    { alt: "Nature Walk", img: "https://placehold.co/500x400/9FE6B9/000000?text=Nature+Walk" },
                    { alt: "Abstract Art", img: "https://placehold.co/500x400/B2F99C/000000?text=Our+Abstract+Life" }
                ];

                galleryData.forEach((item) => {
                    const html = `
                        <div class="col-span-1 bg-gray-700 rounded-xl shadow-xl overflow-hidden transform transition duration-300 hover:shadow-2xl hover:scale-[1.05]">
                            <img src="${item.img}" alt="${item.alt}" class="w-full h-40 object-cover">
                            <p class="text-center p-2 text-sm text-gray-300 font-medium">${item.alt}</p>
                        </div>
                    `;
                    timelineEl.insertAdjacentHTML('beforeend', html);
                });
            </script>
        </div>

        <!-- --- 3. Ending Word (Requires Scroll) --- -->
        <div class="ending-section pt-16 pb-32">
            <div class="bg-indigo-700 text-white p-8 rounded-2xl shadow-2xl max-w-sm w-full animate-pulse">
                <p class="text-xl font-medium mb-4">You had to scroll to find this...</p>
                <h3 class="text-3xl font-extrabold tracking-tight">The Best Is Yet To Come.</h3>
                <p class="mt-4 text-sm opacity-80">Thank you for being part of this incredible journey.</p>
                <div class="mt-6 text-xs border-t border-indigo-500 pt-3">
                    <p>â€” Sent with love.</p>
                </div>
            </div>
        </div>

    </div>

    <!-- JavaScript for Flip Card Functionality -->
    <script>
        // Function to handle the flip action
        function flipCard(cardElement) {
            cardElement.classList.toggle('is-flipped');
        }

        // Attach event listeners to all flip cards after they are rendered
        document.addEventListener('DOMContentLoaded', () => {
            // Re-select the timeline element after the script execution above
            const cards = document.querySelectorAll('.flip-card');
            
            cards.forEach(card => {
                // Attach click listener for desktop/touch
                card.addEventListener('click', () => {
                    flipCard(card);
                });
                
                // Optional: Attach touchstart for better mobile responsiveness
                card.addEventListener('touchstart', (e) => {
                    e.preventDefault(); // Prevent default mobile behavior (like scrolling)
                    flipCard(card);
                }, { passive: false });
            });
        });

        // Set Firebase config and auth status (required for Canvas environment)
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
        
        console.log("E-Card initialized. Firebase Config:", firebaseConfig);
        console.log("App ID:", appId);

        // --- Front Page Logic (Updated for 3D Flip) ---
        const frontPage = document.getElementById('frontPage');
        const openButton = document.getElementById('openCardButton');

        function openCard(event) {
            // Prevent event from bubbling up and causing unintended actions
            event.preventDefault(); 
            
            if (frontPage) {
                // 1. Trigger the CSS flip effect by adding the class
                frontPage.classList.add('flip-out');
                
                // 2. Remove the element from DOM after the transition completes (1000ms from CSS)
                setTimeout(() => {
                    frontPage.remove(); // Remove the element entirely from the DOM
                }, 1000); 

                // Remove the listeners from the front page once activated 
                frontPage.removeEventListener('click', openCard);
                frontPage.removeEventListener('touchstart', openCard);
                openButton.removeEventListener('click', openCard);
            }
        }

        // Attach listeners to the front page itself and the explicit button for redundancy
        if (frontPage) {
            // Use touchstart and click to cover both mobile and desktop
            frontPage.addEventListener('click', openCard);
            frontPage.addEventListener('touchstart', openCard);
            // Ensure the button also works
            openButton.addEventListener('click', openCard);
        }

    </script>
</body>
</html>